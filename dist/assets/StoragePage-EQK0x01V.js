import{b as l,o as v,j as e,w as b}from"./index-DyLGrSyB.js";import{r as s}from"./index-B8aiZLAZ.js";import{F as A}from"./XMarkIcon-CYFvVKEB.js";import"./index-CsHQAqIx.js";function B({title:o,titleId:t,...n},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":t},n),o?l.createElement("title",{id:t},o):null,l.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const k=l.forwardRef(B);function D({title:o,titleId:t,...n},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":t},n),o?l.createElement("title",{id:t},o):null,l.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6 6 0 0 0-5.98 6.496A5.25 5.25 0 0 0 6.75 20.25H18a4.5 4.5 0 0 0 2.206-8.423 3.75 3.75 0 0 0-4.133-4.303A6.001 6.001 0 0 0 10.5 3.75Zm2.03 5.47a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72v4.94a.75.75 0 0 0 1.5 0v-4.94l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z",clipRule:"evenodd"}))}const j=l.forwardRef(D);function S({title:o,titleId:t,...n},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":t},n),o?l.createElement("title",{id:t},o):null,l.createElement("path",{d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625Z"}),l.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const M=l.forwardRef(S);function P({title:o,titleId:t,...n},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":t},n),o?l.createElement("title",{id:t},o):null,l.createElement("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"}))}const U=l.forwardRef(P),r={placeholder:void 0,onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0,onResize:void 0,onResizeCapture:void 0},W=()=>{const o=v();return e.jsx("div",{children:e.jsx("button",{onClick:()=>o("/utilities/index/storage"),children:"Storage"})})},z=()=>{const o=v(),[t,n]=l.useState([]),[u,x]=l.useState(!1),h=l.useRef(null),y=async()=>{try{const d=(await b.get("/backend/object/all")).data.map(i=>{var c;return{id:i.id||Math.random().toString(36).substr(2,9),file:new File([],i.fileName),preview:(c=i.contentType)!=null&&c.startsWith("image/")?`/object/duylongwebappobjectdatabase/${i.fileName}`:void 0,progress:100,status:"completed",url:`/object/duylongwebappobjectdatabase/${i.fileName}`}});n(d)}catch(a){console.error("❌ Failed to fetch files:",a)}};l.useEffect(()=>{y()},[]);const f=a=>{const d=a.map(i=>({id:Math.random().toString(36).substr(2,9),file:i,preview:i.type.startsWith("image/")?URL.createObjectURL(i):void 0,progress:0,status:"pending"}));n(i=>[...d,...i])},w=a=>{a.target.files&&f(Array.from(a.target.files))},N=a=>{a.preventDefault(),x(!0)},C=a=>{a.preventDefault(),x(!1)},R=a=>{a.preventDefault(),x(!1),a.dataTransfer.files&&f(Array.from(a.dataTransfer.files))},F=a=>{n(d=>d.filter(i=>i.id!==a))},E=async()=>{const a=t.filter(d=>d.status==="pending"||d.status==="error");for(const d of a){n(c=>c.map(p=>p.id===d.id?{...p,status:"uploading"}:p));const i=new FormData;i.append("file",d.file);try{await b.post("/backend/object/add",i,{onUploadProgress:c=>{const p=Math.round(c.loaded*100/(c.total||100));n(g=>g.map(m=>m.id===d.id?{...m,progress:p}:m))}}),n(c=>c.map(p=>p.id===d.id?{...p,status:"completed",progress:100}:p))}catch(c){console.error("❌ Upload failed:",c),n(p=>p.map(g=>g.id===d.id?{...g,status:"error",progress:0}:g))}}},T=a=>{switch(a){case"completed":return"text-green-500 font-bold";case"error":return"text-red-500 font-bold";case"uploading":return"text-blue-500 font-bold";default:return"text-gray-500"}};return e.jsxs("div",{className:"p-6 md:p-10 w-full border-2 border-b-blue-400 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-3xl text-slate-800 tracking-tight",children:"Storage & Assets"}),e.jsx("div",{className:"text-slate-500 font-medium",children:"Manage your cloud files and upload new assets."})]}),e.jsxs(s.Button,{variant:"text",color:"blue-gray",onClick:()=>o("/utilities/index/dashboard"),className:"flex items-center gap-2 font-bold",...r,children:[e.jsx(k,{strokeWidth:2,className:"h-4 w-4"})," Back to Utilities"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx(s.Card,{className:"lg:col-span-2 h-fit shadow-lg",...r,children:e.jsxs(s.CardBody,{...r,children:[e.jsxs("div",{onDragOver:N,onDragLeave:C,onDrop:R,onClick:()=>{var a;return(a=h.current)==null?void 0:a.click()},className:`
                                border-2 border-dashed rounded-xl p-10 flex flex-col items-center justify-center cursor-pointer transition-all duration-300
                                ${u?"border-blue-500 bg-blue-50 scale-[1.02]":"border-gray-300 hover:border-blue-400 hover:bg-gray-50"}
                            `,children:[e.jsx("input",{type:"file",multiple:!0,className:"hidden",ref:h,onChange:w}),e.jsx("div",{className:`p-4 rounded-full mb-4 ${u?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:e.jsx(j,{className:"h-10 w-10"})}),e.jsx(s.Typography,{variant:"h5",color:"blue-gray",className:"font-bold",...r,children:"Click or Drop files here"}),e.jsx(s.Typography,{color:"gray",className:"text-sm mt-2 text-center",...r,children:"Support for JPG, PNG, PDF (Max 10MB)"})]}),t.length>0&&e.jsxs("div",{className:"mt-8 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(s.Typography,{variant:"h6",color:"blue-gray",...r,children:["Files (",t.length,")"]}),e.jsx(s.Button,{size:"sm",color:"red",variant:"text",onClick:()=>n([]),...r,children:"Clear All"})]}),e.jsx("div",{className:"flex flex-col gap-3 max-h-[400px] overflow-y-auto pr-2",children:t.map(a=>e.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-100 rounded-lg hover:shadow-sm transition-shadow bg-white",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 overflow-hidden flex items-center justify-center flex-shrink-0",children:a.preview?e.jsx("img",{src:a.preview,alt:"preview",className:"h-full w-full object-cover"}):e.jsx(M,{className:"h-6 w-6 text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx(s.Typography,{variant:"small",className:"font-medium truncate text-gray-900",...r,children:a.file.name}),e.jsx(s.Typography,{variant:"small",className:T(a.status),...r,children:a.status==="uploading"?`${a.progress}%`:a.status})]}),e.jsx(s.Progress,{value:a.progress,size:"sm",color:a.status==="error"?"red":a.status==="completed"?"green":"blue",...r})]}),e.jsx(s.IconButton,{variant:"text",color:"blue-gray",onClick:()=>F(a.id),...r,children:e.jsx(A,{className:"h-5 w-5"})})]},a.id))}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(s.Button,{onClick:E,color:"blue",disabled:t.every(a=>a.status==="completed"),...r,children:["Upload ",t.filter(a=>a.status==="pending").length," Files"]})})]})]})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx($,{}),e.jsx(Z,{})]})]})]})},$=()=>e.jsx(s.Card,{className:"shadow-lg bg-gradient-to-br from-blue-900 to-blue-800 text-white",...r,children:e.jsxs(s.CardBody,{...r,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"h5",className:"mb-1",...r,children:"Storage Usage"}),e.jsx(s.Typography,{className:"text-blue-200 text-sm",...r,children:"75% of 100GB Used"})]}),e.jsx("div",{className:"p-2 bg-blue-700 rounded-lg",children:e.jsx(j,{className:"h-6 w-6 text-white"})})]}),e.jsx(s.Progress,{value:75,color:"white",className:"bg-blue-900/50 mb-4",...r}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-blue-700/30 rounded-lg",children:[e.jsx(s.Typography,{variant:"h4",...r,children:"1200"}),e.jsx(s.Typography,{className:"text-xs text-blue-200",...r,children:"Images"})]}),e.jsxs("div",{className:"p-3 bg-blue-700/30 rounded-lg",children:[e.jsx(s.Typography,{variant:"h4",...r,children:"350"}),e.jsx(s.Typography,{className:"text-xs text-blue-200",...r,children:"Documents"})]})]})]})}),Z=()=>e.jsx(s.Card,{className:"shadow-lg border border-gray-100",...r,children:e.jsxs(s.CardBody,{...r,children:[e.jsx(s.Typography,{variant:"h6",color:"blue-gray",className:"mb-4",...r,children:"Recent Uploads"}),e.jsx("ul",{className:"flex flex-col gap-3",children:[1,2,3].map((o,t)=>e.jsxs("li",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-md transition-colors cursor-pointer",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-md text-purple-500",children:e.jsx(U,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(s.Typography,{variant:"small",className:"font-medium text-gray-900",...r,children:["file_",t,".jpg"]}),e.jsx(s.Typography,{variant:"small",className:"text-xs text-gray-500",...r,children:"2.4 MB • 2 hours ago"})]})]},t))})]})});export{z as StoragePage,W as StoragePageIcon,z as default};
