import{v as I,j as e,b as x,o as E,w as O,x as R,y as A,z as N,O as U,C as B}from"./index-Cf-gkL86.js";import{r as f}from"./index-Dwq_e4pd.js";import{O as _,C as T,D as W}from"./CustomDrawer-C9tMGd7A.js";import{u as F}from"./objectImageStore-DfirdAFW.js";import{A as $}from"./index-CVrnXY74.js";import{m as d}from"./proxy-CT5DUpU2.js";import"./index-BrDmiHYa.js";import"./createLucideIcon-CcJUhs0g.js";import"./mail-DqbXIcK6.js";const H=({onClick:a})=>{const s=I(i=>i.information);return e.jsx("div",{children:e.jsxs("button",{onClick:a,children:[e.jsx("div",{className:"rounded-full overflow-hidden"}),e.jsx("p",{children:s.profiles.firstName||"Admin"})]})})},y={placeholder:void 0,onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0,onResize:void 0,onResizeCapture:void 0},q=({pageList:a,pathList:s})=>{const[i,n]=x.useState(!1),r=E(),h=x.useMemo(()=>a.map((l,c)=>({name:l,path:s[c]})).filter(l=>l.name!=="Index"),[a,s]);x.useEffect(()=>{const l=()=>window.innerWidth>=960&&n(!1);return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const u=l=>{const c=l.toLowerCase().replace(/\s+/g,"-");r(`/${c}`),n(!1)},o=({mobile:l=!1})=>e.jsx("ul",{className:`flex flex-col gap-2 lg:mb-0 lg:mt-0 lg:flex-row lg:items-center lg:gap-6 ${l?"mt-4 mb-4":""}`,children:h.map(({name:c,path:m})=>e.jsx(f.Typography,{as:"li",variant:"small",className:"font-bold text-lg",...y,children:e.jsx("div",{onClick:()=>u(m),className:`cursor-pointer rounded-lg px-4 py-2 transition-all duration-300
              ${l?"text-white hover:bg-white/10 hover:shadow-lg border border-transparent hover:border-white/10":"text-white/90 hover:text-white hover:bg-white/10 hover:shadow-[0_4px_30px_rgba(0,0,0,0.1)] hover:backdrop-blur-sm border border-transparent hover:border-white/20"}`,children:c})},c))});return e.jsx("div",{className:"w-full ",children:e.jsxs(f.Navbar,{fullWidth:!0,className:"sticky top-0 z-50 h-max max-w-full  px-2 py-2 lg:px-8 border-b border-white/40 rounded-2xl bg-indigo-500/70 backdrop-blur-md shadow-lg",...y,children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(f.Typography,{as:"div",onClick:()=>r("/home/index"),className:"cursor-pointer py-1.5 font-bold text-xl lg:text-2xl text-white hover:text-indigo-200 transition-colors drop-shadow-sm",style:{fontFamily:"serif"},...y,children:"ICE SITE"}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(o,{})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"hover:opacity-80 transition-opacity cursor-pointer p-1 rounded-full hover:bg-white/10",children:e.jsx(H,{onClick:()=>r("/admin/person-profile")})}),e.jsx(f.IconButton,{variant:"text",className:"ml-auto h-6 w-6 text-white hover:bg-white/10 focus:bg-white/10 active:bg-white/10 lg:hidden rounded-full",ripple:!1,onClick:()=>n(!i),...y,children:i?e.jsx(K,{}):e.jsx(G,{})})]})]}),e.jsx(f.Collapse,{open:i,children:e.jsx("div",{className:"border-t border-white/20 mt-2",children:e.jsx(o,{mobile:!0})})})]})})},G=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),K=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"h-6 w-6",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),V=({width:a,height:s,networkUrl:i})=>e.jsx("div",{style:{width:`${a*4}px !important`,height:`${s*4}px !important`,clipPath:"circle(50%)"},children:e.jsx("img",{src:i,onLoad:()=>{console.log("ðŸŽ¨ Image pixels received, triggering render...")},className:"w-full h-full object-cover"})}),X=({size:a,collaboratorDistance:s})=>{const i=[{color:"bg-red-500",delay:0},{color:"bg-blue-500",delay:.1},{color:"bg-green-500",delay:.2},{color:"bg-amber-500",delay:.3},{color:"bg-violet-500",delay:.4},{color:"bg-pink-500",delay:.5}],n=[{x:0,y:-s},{x:s*.866,y:-s*.5},{x:s*.866,y:s*.5},{x:0,y:s},{x:-s*.866,y:s*.5},{x:-s*.866,y:-s*.5}],r=Math.max(a*.4,20);return e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsx($,{children:i.map((h,u)=>{const o=n[u];return e.jsxs(d.div,{initial:{x:0,y:0,opacity:0,scale:0},animate:{x:o.x,y:o.y,opacity:1,scale:1},exit:{x:0,y:0,opacity:0,scale:0},transition:{type:"spring",stiffness:200,damping:20,delay:h.delay},className:`absolute rounded-full ${h.color} border-2 border-white/90 shadow-lg`,style:{width:`${r}px`,height:`${r}px`,left:`calc(50% - ${r/2}px)`,top:`calc(50% - ${r/2}px)`},children:[e.jsx(d.div,{animate:{scale:[1,1.1,1],opacity:[.8,1,.8]},transition:{duration:2,repeat:1/0,delay:h.delay},className:"w-full h-full rounded-full bg-white/20"}),e.jsx("div",{className:"absolute inset-1 rounded-full bg-white/40 flex items-center justify-center",children:e.jsx("div",{className:"rounded-full bg-white/70",style:{width:`${Math.max(r*.3,8)}px`,height:`${Math.max(r*.3,8)}px`}})})]},u)})})})},Y=({rotatingBorderSize:a,glowSize1:s,glowSize2:i})=>e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[e.jsx(d.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute border-2 border-transparent border-t-blue-500 border-r-blue-500 rounded-full opacity-70",style:{width:`${a}px`,height:`${a}px`}}),e.jsx(d.div,{animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute rounded-full bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500 -z-10",style:{width:`${s}px`,height:`${s}px`}}),e.jsx(d.div,{animate:{scale:[1.2,1.4,1.2],opacity:[.1,.05,.1]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute rounded-full bg-gradient-to-br from-cyan-400 via-blue-500 to-purple-600 -z-20",style:{width:`${i}px`,height:`${i}px`}})]}),J=({size:a,delay:s})=>e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((i,n)=>e.jsx(d.div,{initial:{opacity:0,scale:0,x:0,y:0},animate:{opacity:[0,1,0],scale:[0,1,0],x:Math.cos(n*Math.PI*2/8)*(a*.8),y:Math.sin(n*Math.PI*2/8)*(a*.8)},transition:{duration:2,repeat:1/0,delay:n*.1,ease:"easeOut"},className:"absolute bg-blue-400 rounded-full left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",style:{width:`${Math.max(a*.08,4)}px`,height:`${Math.max(a*.08,4)}px`}},n))}),Q=({size:a})=>e.jsx(d.div,{initial:{scale:0,opacity:.8},animate:{scale:2.5,opacity:0},exit:{scale:0,opacity:0},transition:{duration:.6,ease:"easeOut"},className:"absolute rounded-full border-2 border-blue-400 pointer-events-none",style:{width:`${a}px`,height:`${a}px`}}),Z=({x:a,y:s,sizeScale:i=1,collaboratorDistance:n=60})=>{const[r,h]=x.useState(!1),u=()=>{h(!r)},o=i*48,l=Math.max(Math.floor(o*.08),2),c=o+16,m=o+12,v=o+24,g=Math.max(Math.floor(o*.25),12),t=Math.max(Math.floor(o*.375),18),p=Math.max(o-l*6,20),b=F(),C=`https://backend.duylong.art/object/duylongwebappobjectdatabase/${I().information.profiles.alias}/admin.png?v=${b.versions.avatarVersion}`,[S,z]=x.useState("");return x.useEffect(()=>{let w="";const P=async(M,k)=>{try{const j=await O.get(M,{responseType:"blob"}),L=URL.createObjectURL(j.data);return k(L),L}catch(j){console.error("Lá»—i táº£i áº£nh qua Proxy:",j),k(M)}};return(async()=>{w=await P(C,z)||""})(),()=>{w&&URL.revokeObjectURL(w)}},[]),e.jsx("div",{className:"fixed z-50 border-2 border-red-500 rotate-45",style:{bottom:`${a}px`,right:`${s}px`},children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx($,{children:r&&e.jsx(X,{size:o,collaboratorDistance:n})}),e.jsx(Y,{glowSize1:m,glowSize2:v,rotatingBorderSize:c}),e.jsx(d.button,{onClick:u,whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"rounded-full flex items-center border-2  justify-center rotate-45 bg-white/95 backdrop-blur-xl border-white/30 shadow-2xl hover:shadow-3xl transition-all duration-300 ease-out hover:bg-white z-10",style:{width:`${o}px`,height:`${o}px`,borderWidth:`${l}px`,borderColor:"#4f46e5",boxShadow:`
              0 8px 32px rgba(0, 0, 0, 0.12),
              0 4px 16px rgba(0, 0, 0, 0.08),
              inset 0 1px 0 rgba(255, 255, 255, 0.6)
            `},children:e.jsx(d.div,{animate:{rotate:r?360:0},transition:{duration:.3,ease:"easeInOut"},className:" rounded-full border-2 border-white/20",children:e.jsx("div",{className:" rounded-full rotate-270 block ",style:{width:`${p}px`,height:`${p}px`},children:e.jsx(V,{width:p,height:p,networkUrl:S})})})}),e.jsx($,{children:r&&e.jsx(Q,{size:o+10})}),e.jsx(d.div,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"absolute bg-green-400 rounded-full border-2 border-white shadow-lg z-20",style:{width:`${g}px`,height:`${g}px`,top:"-2px",right:"-2px"}}),!r&&e.jsx(d.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute bg-red-500 text-white rounded-full flex items-center justify-center font-bold shadow-lg z-30",style:{width:`${t}px`,height:`${t}px`,fontSize:`${Math.max(t*.5,10)}px`,top:"-4px",right:"-4px"}}),r&&e.jsx(J,{size:o*1.5,delay:0})]})})},ce=({children:a})=>{const[s,i]=R(B),n=A(),r=x.useRef(null);var h=N.filter(t=>t.type==="domain"&&!t.path.includes("login")&&!t.path.includes("register")&&!t.path.includes("entry")&&!t.path.includes("admin")).map(t=>t.path),u=N.filter(t=>t.type==="domain"&&!t.path.includes("login")&&!t.path.includes("register")&&!t.path.includes("entry")&&!t.path.includes("admin")).map(t=>t.title);const o=N.filter(t=>t.type!=="domain"||t.path.includes("admin")||["login","register","entry"].some(p=>t.path.includes(p))?!1:t.allowedRoles&&t.allowedRoles.length>0?t.allowedRoles.includes(n.account.role):!0),l=o.map(t=>t.title||t.path),c=o.map(t=>t.path);console.log("Page List: "+u),console.log("Path List: "+h);const[m,v]=x.useState({x:0,y:0}),g=(t,p)=>{v(b=>({x:b.x+p.deltaX,y:b.y+p.deltaY}))};return x.useEffect(()=>{I.getState().fetchFromDatabase()},[s.value]),e.jsxs("div",{className:"flex flex-col h-full  w-full overflow-visible relative",children:[e.jsxs("div",{className:"flex w-full border-2  flex-row items-center justify-start  gap-2 shadow-sm z-10 bg-white/50 backdrop-blur-sm",children:[e.jsx("div",{children:e.jsx(_,{onClick:()=>i({type:"CLICK"})})}),e.jsx("div",{className:"flex-1",children:e.jsx(q,{pageList:l,pathList:c})})]}),e.jsx(T,{isOpen:s.matches("onButtonOpen"),onClose:()=>i({type:"CLOSE"})}),e.jsxs("div",{className:"flex-1  z-20",children:[a,e.jsx(U,{})]}),e.jsx(W,{nodeRef:r,position:m,onDrag:g,children:e.jsx("div",{ref:r,className:"absolute bottom-10 right-10 z-[1000] cursor-move touch-none",style:{position:"absolute"},children:e.jsx(Z,{x:0,y:0,sizeScale:1.5,collaboratorDistance:100})})})]})};export{ce as default};
